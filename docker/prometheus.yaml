version: "3.9"
networks:
  prometheus:
    driver: bridge
services:
  prometheus:
    image: bitnami/prometheus:2.35.0
    volumes:
      - type: bind
        source: prometheus-config.yaml
        target: /opt/bitnami/prometheus/conf/prometheus.yml
        read_only: true
      - type: bind
        source: prometheus-rules.yaml
        target: /opt/bitnami/prometheus/conf/rules.yml
        read_only: true
    ports:
      - 9090:9090
  node-exporter:
    image: bitnami/node-exporter:1.3.1
    ports:
      - 9100:9100
  grafana:
    image: bitnami/grafana:8.5.1
    volumes:
      - type: bind
        source: grafana-config.ini
        target: /opt/bitnami/grafana/conf/grafana.ini
        read_only: true
      - type: bind
        source: grafana-datasources.yaml
        target: /opt/bitnami/grafana/conf/provisioning/datasources/datasources.yaml
        read_only: true
    ports:
      - 3000:3000
